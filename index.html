<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Front Desk Checklist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        html.dark {
            color-scheme: dark;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        html.dark body {
            background-color: #111827;
        }

        /* Dark Mode Styles */
        html.dark #app-container { background-color: #1f2937; }
        html.dark h1, html.dark h3, html.dark h4 { color: #f9fafb; }
        html.dark p, html.dark label, html.dark .task-text { color: #d1d5db; }
        html.dark header { border-bottom-color: #374151; }
        html.dark .form-input, html.dark .form-select, html.dark textarea {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }
        html.dark .bg-gray-50 { background-color: #374151; }
        html.dark .bg-blue-50 { background-color: #1e3a8a; border-color: #1e40af; }
        html.dark .text-blue-800 { color: #93c5fd; }
        html.dark .bg-white.rounded-lg { background-color: #374151; border-color: #4b5563; }
        html.dark footer { border-top-color: #374151; }

        .task-item input:checked + label {
            text-decoration: line-through;
            color: #6b7280;
        }
        html.dark .task-item input:checked + label {
            color: #9ca3af;
        }
        .task-item input:checked + label .task-text {
            opacity: 0.7;
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        #alert-modal {
            transition: opacity 0.3s ease;
        }
        /* Toggle Switch CSS */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #2563eb;
        }
        input:checked + .slider:before {
            transform: translateX(22px);
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div id="app-container" class="max-w-6xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-8">

        <!-- Header Section -->
        <header class="border-b pb-6 mb-6">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Front Desk Checklist</h1>
                    <p class="text-gray-500 mt-1">Interactive checklist for daily front desk operations.</p>
                </div>
                <div class="mt-4 sm:mt-0 flex items-center space-x-4">
                    <input type="date" id="current-date" class="form-input rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                    <select id="shift-select" class="form-select rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                        <option>AM</option>
                        <option>PM</option>
                        <option>Night</option>
                    </select>
                    <!-- Dark Mode Toggle -->
                    <label for="dark-mode-toggle" class="toggle-switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="mt-6">
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
                </div>
                <p id="progress-text" class="text-center text-sm text-gray-600 mt-2">0% Complete</p>
            </div>
        </header>

        <!-- Main Content -->
        <main id="checklist-container">
            
            <!-- At a Glance Section -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="hskp-name" class="block text-sm font-medium text-gray-700">HSKP Name</label>
                    <input type="text" id="hskp-name" placeholder="Name..." class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="engineer-name" class="block text-sm font-medium text-gray-700">Engineer Name</label>
                    <input type="text" id="engineer-name" placeholder="Name..." class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="arrivals" class="block text-sm font-medium text-gray-700">Arrivals</label>
                    <input type="number" id="arrivals" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                 <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="departures" class="block text-sm font-medium text-gray-700">Departures</label>
                    <input type="number" id="departures" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="occupancy" class="block text-sm font-medium text-gray-700">Projected Occupancy %</label>
                    <input type="number" id="occupancy" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="rate" class="block text-sm font-medium text-gray-700">$ Rate</label>
                    <input type="number" id="rate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="enrollments" class="block text-sm font-medium text-gray-700">Hilton Honor Enrollments</label>
                    <input type="number" id="enrollments" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <label for="stayplatform-comments" class="block text-sm font-medium text-gray-700">StayPlatform Comments Reviewed</label>
                    <select id="stayplatform-comments" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>
            </div>

            <!-- Meeting Rooms Section -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                 <h3 class="font-semibold text-lg text-blue-800 mb-3">Meeting Room Parking Passes</h3>
                 <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4">
                     <div><label class="block text-sm">Saguaro</label><input type="number" data-id="saguaro-parking" class="mt-1 w-full form-input rounded-md border-gray-300"></div>
                     <div><label class="block text-sm">Cholla</label><input type="number" data-id="cholla-parking" class="mt-1 w-full form-input rounded-md border-gray-300"></div>
                     <div><label class="block text-sm">Navajo</label><input type="number" data-id="navajo-parking" class="mt-1 w-full form-input rounded-md border-gray-300"></div>
                     <div><label class="block text-sm">Yavapai</label><input type="number" data-id="yavapai-parking" class="mt-1 w-full form-input rounded-md border-gray-300"></div>
                     <div><label class="block text-sm">Agave</label><input type="number" data-id="agave-parking" class="mt-1 w-full form-input rounded-md border-gray-300"></div>
                     <div><label class="block text-sm">Atrium</label><input type="number" data-id="atrium-parking" class="mt-1 w-full form-input rounded-md border-gray-300"></div>
                 </div>
            </div>

            <!-- Main Checklist -->
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <h3 class="font-semibold text-xl text-gray-800 mb-4">Shift Tasks</h3>
                <ul id="task-list" class="space-y-4 text-gray-700">
                    <li class="task-item flex items-center"><input type="checkbox" id="task-1" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-1" class="ml-3 block"><span class="task-text">Log into Pep and start your shift.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-2" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-2" class="ml-3 block"><span class="task-text">Check email & calendar for DAILY EVENTS & Group info resumes.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-3" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-3" class="ml-3 block"><span class="task-text">Ensure workstation is clean, stocked, and presentable.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-4" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-4" class="ml-3 block"><span class="task-text">Log into SP2 SYSTEMS and log all engineering and housekeeping requests.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-5" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-5" class="ml-3 block"><span class="task-text">Login into Kipsu and respond and communicate guests needs or challenges.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-6" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-6" class="ml-3 block"><span class="task-text">Login into NOR1. Check for upgrades. Realize or Deny requests 4 days in advance.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-7" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-7" class="ml-3 block"><span class="task-text">Print 30 Welcome letters - Double sided on the short edge and Landscape.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-8" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-8" class="ml-3 block"><span class="task-text">Print Arrivals Report, review Reservation Remarks to assign rooms and fulfill requests. DISCUSS WITH MOD ANY CHALLENGES.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-9" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-9" class="ml-3 block"><span class="task-text">Print Dynamic Report (High Balance) and settle payments as necessary. For amounts over 2k, take payment and re-authorize.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-10" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-10" class="ml-3 block"><span class="task-text">Ensure 3rd Party Reservations are set up correctly (Rate to Hidden, Folio 1 for incidentals, Folio 2 for room/tax) and process VCC payments.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-11" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-11" class="ml-3 block"><span class="task-text">Prepare Digital check-in bags and notate in remarks. HSKP or FD to deliver.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-12" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-12" class="ml-3 block"><span class="task-text">Login into SERTIFI and process ECONFIRMATIONS and CCA FORMS.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-13" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-13" class="ml-3 block"><span class="task-text">Print report for Advance Purchase/Direct Bill and research any credit card refunds.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-14" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-14" class="ml-3 block"><span class="task-text">Login into Booking.com & Expedia to respond to messages and reviews.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-15" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-15" class="ml-3 block"><span class="task-text">Print Remaining arrivals; for 7+ night stays, set trace for 7th day payment.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-16" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-16" class="ml-3 block"><span class="task-text">Assign pet rooms to 2nd floor and add Trace for HSKP deep clean. Charge pet fee.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-17" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-17" class="ml-3 block"><span class="task-text">Use tape chart on main screen to clear any gaps in room assignments.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-18" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-18" class="ml-3 block"><span class="task-text">Throughout the day check for NKJB rooms and change to any room available.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-19" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-19" class="ml-3 block"><span class="task-text">Prepare coffee station in lobby after breakfast is over.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-20" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-20" class="ml-3 block"><span class="task-text">Handle DAY USE rooms based on occupancy (<75% stay, >75% checkout).</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-21" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-21" class="ml-3 block"><span class="task-text">Stock and check freshness of food, drinks, and sundries in Marketplace.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-22" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-22" class="ml-3 block"><span class="task-text">ORDER GRAB AND GO FOOD IF NEEDED (good for 3 days).</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-23" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-23" class="ml-3 block"><span class="task-text">Restock amenities (shaving cream, razors, toothbrush, coffee, etc.).</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-24" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-24" class="ml-3 block"><span class="task-text">Restock pens, paper, water bags, room keys, parking tags, menus, etc.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-25" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-25" class="ml-3 block"><span class="task-text">Ensure Hilton Honor water bags and snack bags are ready.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-26" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-26" class="ml-3 block"><span class="task-text">Check incoming and outgoing packages and text guest.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-27" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-27" class="ml-3 block"><span class="task-text">If 4 or less rooms to sell, you may sell at lowest of $199 (one night, not extendable).</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-28" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-28" class="ml-3 block"><span class="task-text">Check SP and communicate with HSKP and ENG what is still pending.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-29" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-29" class="ml-3 block"><span class="task-text">Count cash drawers 15 minutes before end of shift.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-30" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-30" class="ml-3 block"><span class="task-text">Review High Balance report and reservation remarks before departure.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-31" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-31" class="ml-3 block"><span class="task-text">Ensure your Kipsu dashboard Welcome messages to send is clear.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-32" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-32" class="ml-3 block"><span class="task-text">Review Stay Experience comments and close alerts.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-33" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-33" class="ml-3 block"><span class="task-text">Engage and ask each non-honors member to join. (Goal: 8/month)</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-34" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-34" class="ml-3 block"><span class="task-text">Check Digital Dashboard Every 2 Hours.</span></label></li>
                    <li class="task-item flex items-center"><input type="checkbox" id="task-35" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="task-35" class="ml-3 block"><span class="task-text">End your Shift in Pep.</span></label></li>
                </ul>
            </div>
            
            <!-- Notes Section -->
            <div class="mt-8">
                <label for="shift-notes" class="block text-lg font-semibold text-gray-700">Shift Report & Notes for Incoming GSAs and MODs</label>
                <textarea id="shift-notes" rows="4" class="mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="Enter any important notes for the next shift..."></textarea>
            </div>

        </main>

        <!-- Footer / Actions -->
        <footer class="mt-8 pt-6 border-t flex flex-col sm:flex-row justify-end sm:space-x-4 space-y-3 sm:space-y-0">
             <button id="print-pdf-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow transition-colors">
                Print / Save as PDF
            </button>
            <button id="reset-button" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow transition-colors">
                Reset Checklist
            </button>
        </footer>

    </div>
    
    <!-- Alert Modal -->
    <div id="alert-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center hidden opacity-0">
        <div class="bg-white p-5 rounded-lg shadow-xl w-11/12 md:w-1/3">
            <h3 id="alert-title" class="text-lg font-bold text-gray-900">Alert</h3>
            <div class="mt-2">
                <p id="alert-message" class="text-sm text-gray-600">Something went wrong.</p>
            </div>
            <div class="mt-4 text-right">
                <button id="alert-close" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300">
                    Close
                </button>
            </div>
        </div>
    </div>


    <script>
        // We wrap the entire script in a function that runs after the page is fully loaded.
        function initializeApp() {
            const appContainer = document.getElementById('app-container');
            const inputs = document.querySelectorAll('input[type="checkbox"], input[type="number"], input[type="text"], textarea, select');
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const resetButton = document.getElementById('reset-button');
            const printPdfButton = document.getElementById('print-pdf-button');
            const dateInput = document.getElementById('current-date');
            const shiftSelect = document.getElementById('shift-select');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            
            // Alert Modal elements
            const alertModal = document.getElementById('alert-modal');
            const alertTitle = document.getElementById('alert-title');
            const alertMessage = document.getElementById('alert-message');
            const alertClose = document.getElementById('alert-close');


            // Set current date
            dateInput.valueAsDate = new Date();

            // --- DARK MODE ---
            function applyDarkMode(isDark) {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }

            darkModeToggle.addEventListener('change', (e) => {
                applyDarkMode(e.target.checked);
                saveState();
            });

            // --- ALERT MODAL ---
            function showAlert(title, message) {
                alertTitle.textContent = title;
                alertMessage.textContent = message;
                alertModal.classList.remove('hidden');
                setTimeout(() => alertModal.classList.remove('opacity-0'), 10);
            }
            
            alertClose.addEventListener('click', () => {
                alertModal.classList.add('opacity-0');
                setTimeout(() => alertModal.classList.add('hidden'), 300);
            });

            // --- LOCAL STORAGE FUNCTIONS ---
            function saveState() {
                const state = {
                    darkMode: darkModeToggle.checked
                };
                inputs.forEach(input => {
                    const id = input.id || input.dataset.id;
                    if (!id) return;

                    if (input.type === 'checkbox') {
                        state[id] = input.checked;
                    } else {
                        state[id] = input.value;
                    }
                });
                localStorage.setItem('frontDeskChecklistState', JSON.stringify(state));
                updateProgress();
            }

            function loadState() {
                const state = JSON.parse(localStorage.getItem('frontDeskChecklistState'));
                if (state) {
                    // Load dark mode state
                    darkModeToggle.checked = state.darkMode || false;
                    applyDarkMode(darkModeToggle.checked);

                    // Load other inputs
                    inputs.forEach(input => {
                        const id = input.id || input.dataset.id;
                        if (id && state[id] !== undefined) {
                            if (input.type === 'checkbox') {
                                input.checked = state[id];
                            } else {
                                input.value = state[id];
                            }
                        }
                    });
                }
                updateProgress();
            }

            // --- UI FUNCTIONS ---
            function updateProgress() {
                const totalTasks = checkboxes.length;
                if (totalTasks === 0) return;
                const completedTasks = Array.from(checkboxes).filter(cb => cb.checked).length;
                const percentage = Math.round((completedTasks / totalTasks) * 100);
                
                progressBar.style.width = percentage + '%';
                progressText.textContent = `${percentage}% Complete (${completedTasks} / ${totalTasks} tasks)`;
            }

            function resetChecklist() {
                inputs.forEach(input => {
                    if (input.type === 'checkbox') {
                        input.checked = false;
                    } else if (input.type !== 'date' && input.tagName.toLowerCase() !== 'select') {
                        input.value = '';
                    }
                });
                // Reset select elements to the first option
                document.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
                saveState();
                showAlert('Checklist Reset', 'The checklist has been cleared for the next shift.');
            }

            // --- REPORT GENERATION ---
            function generateReportHtml() {
                    let reportHtml = `
                        <h1>Front Desk Shift Report</h1>
                        <p><strong>Date:</strong> ${dateInput.value}</p>
                        <p><strong>Shift:</strong> ${shiftSelect.value}</p>
                        <hr>
                        <h2>At a Glance</h2>
                        <ul>
                            <li><strong>HSKP on Duty:</strong> ${document.getElementById('hskp-name').value || 'N/A'}</li>
                            <li><strong>Engineer on Duty:</strong> ${document.getElementById('engineer-name').value || 'N/A'}</li>
                            <li><strong>Arrivals:</strong> ${document.getElementById('arrivals').value || 'N/A'}</li>
                            <li><strong>Departures:</strong> ${document.getElementById('departures').value || 'N/A'}</li>
                            <li><strong>Projected Occupancy:</strong> ${document.getElementById('occupancy').value || 'N/A'}%</li>
                            <li><strong>$ Rate:</strong> $${document.getElementById('rate').value || 'N/A'}</li>
                            <li><strong>Hilton Honor Enrollments:</strong> ${document.getElementById('enrollments').value || 'N/A'}</li>
                            <li><strong>StayPlatform Comments Reviewed:</strong> ${document.getElementById('stayplatform-comments').value}</li>
                        </ul>
                        <h2>Meeting Room Parking Passes</h2>
                          <ul>
                            <li><strong>Saguaro:</strong> ${document.querySelector('[data-id="saguaro-parking"]').value || '0'}</li>
                            <li><strong>Cholla:</strong> ${document.querySelector('[data-id="cholla-parking"]').value || '0'}</li>
                            <li><strong>Navajo:</strong> ${document.querySelector('[data-id="navajo-parking"]').value || '0'}</li>
                            <li><strong>Yavapai:</strong> ${document.querySelector('[data-id="yavapai-parking"]').value || '0'}</li>
                            <li><strong>Agave:</strong> ${document.querySelector('[data-id="agave-parking"]').value || '0'}</li>
                            <li><strong>Atrium:</strong> ${document.querySelector('[data-id="atrium-parking"]').value || '0'}</li>
                        </ul>
                        <hr>
                        <h2>Main Shift Tasks</h2><ul>`;

                    document.querySelectorAll('#task-list .task-item').forEach(item => {
                        const checkbox = item.querySelector('input[type="checkbox"]');
                        const label = item.querySelector('label').textContent;
                        const status = checkbox.checked ? '✓ Completed' : '✗ Pending';
                        reportHtml += `<li><strong>[${status}]</strong> ${label}</li>`;
                    });
                    reportHtml += `</ul>`;
                                        
                    reportHtml += `<hr><h2>Shift Report & Notes</h2>`;
                    const notes = document.getElementById('shift-notes').value.replace(/\n/g, '<br>');
                    reportHtml += `<p>${notes || 'No notes entered.'}</p>`;

                    return reportHtml;
            }

            function printPdf() {
                const reportHtml = generateReportHtml();
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                        <head>
                            <title>Front Desk Shift Report</title>
                            <style>
                                body { font-family: 'Inter', sans-serif; margin: 2rem; }
                                h1, h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; }
                                ul { list-style-type: none; padding-left: 0; }
                                li { margin-bottom: 8px; }
                                hr { margin: 20px 0; }
                            </style>
                        </head>
                        <body>
                            ${reportHtml}
                        </body>
                    </html>
                `);
                printWindow.document.close();
                printWindow.focus();
                setTimeout(() => {
                    printWindow.print();
                    printWindow.close();
                }, 250);
            }
            
            // --- EVENT LISTENERS ---
            appContainer.addEventListener('change', saveState);
            resetButton.addEventListener('click', resetChecklist);
            printPdfButton.addEventListener('click', printPdf);

            // --- INITIALIZATION ---
            loadState();
        };
        
        // This ensures the initializeApp function runs only after the window, 
        // including all scripts, is fully loaded.
        if (document.readyState === 'complete') {
          initializeApp();
        } else {
          window.addEventListener('load', initializeApp);
        }
    </script>

</body>
</html>

